<template>
    <div>
    <div class="section-header">
        <div class="slds-p-top_xx-small slds-p-left_x-small slds-text-heading_small slds-p-bottom_medium">
            <span><b>Client's Top Priorities or Topics</b></span>
        </div>
    </div>
    </div>
    <div class="slds-p-top_small  slds-text-align_right slds-text-heading_small">
        <template lwc:if={isEditMode}>
            <lightning-button label="Clear Data" class="clear-data-btn" variant="Neutral" alternative-text="Clear entire table" size="small"
                title="Clear entire table" onclick={deleteAllClientRows}>
            </lightning-button>
            <!-- regarding clear data-->
            <template if:true={showConfirmModalClient}>
                <section role="dialog" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header" style="background-color: #ba0517; color: white;">
                            <h2 class="slds-text-heading_medium">Confirmation</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium">
                            <p class="slds-text-heading_small slds-text-align_center slds-p-horizontal_large">
                                This action will clear all data in the table. Are you sure you want to proceed?
                            </p>
                            <div style="text-align: center;" class="slds-p-top_large">
                            <lightning-button label="Continue" onclick={handleConfirmDelete}>
                            </lightning-button>

                            <lightning-button label="Cancel" onclick={handleCancelDelete} class="slds-m-left_x-small">
                            </lightning-button>
                        </div>
                        </div>

                        
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </template>
               <!-- regarding clear data-->
        </template>
        <template lwc:else>
            <lightning-button label="Clear Data" class="clear-data-btn" variant="Neutral" disabled alternative-text="Clear entire table"
                size="small" title="Clear entire table" onclick={deleteAllClientRows}>
            </lightning-button>
        </template>
    </div>
    <div class="slds-p-top_small slds-p-bottom_large">
        <table class="slds-text-body_small slds-table slds-border_left slds-border_right  slds-table--bordered slds-max-medium-table--stacked-horizontal slds-table--resizable-cols slds-table--fixed-layout">
            <thead class="header-color">
                <tr>
                    <td colspan="5" class="slds-border_right"><b>Client’s Goal, Issue or Priority </b></td>
                    <td colspan="5" ><b>Strategies UHG will propose this year to address client’s priorities</b></td>
                    <td colspan="1">
                        <div class="slds-text-align_right">
                        <template lwc:if={isEditMode}>
                            <lightning-icon icon-name="action:new" access-key={index} id={index}
                                alternative-text="Add new row" size="xx-small" title="Add new row" onclick={addClientPriorityRow}>
                            </lightning-icon>
                        </template>
                        <template lwc:else>
                            <lightning-icon icon-name="action:new" alternative-text="Add new row" size="xx-small"
                                title="Add new row" class="disabled-icon">
                            </lightning-icon>
                        </template>
                        </div>
                    </td>
                </tr>
            </thead>
            <tbody>
                <template for:each={clientPriorityDetails} for:item="rec" for:index="index">
                    <tr key={rec.id}>
                        <td colspan="5" class="slds-border_right">
                            <template lwc:if={isEditMode}>
                                <lightning-textarea type="text" name="Client_Priority__c" data-index={index}
                                    onchange={handleChange} value={rec.Client_Priority__c} max-length="32768"></lightning-textarea>
                            </template>
                            <template lwc:else>
                                <lightning-formatted-text style="word-wrap: break-word; white-space: normal;" value={rec.Client_Priority__c}></lightning-formatted-text>
                            </template>
                        </td>
                        <td colspan="5" >
                            <template lwc:if={isEditMode}>
                                <lightning-textarea type="text" name="UHG_Strategy__c" data-index={index}
                                    onchange={handleChange} value={rec.UHG_Strategy__c} max-length="32768">
                                </lightning-textarea>
                            </template>
                            <template lwc:else>
                                <lightning-formatted-text style="word-wrap: break-word; white-space: normal;" value={rec.UHG_Strategy__c}></lightning-formatted-text>
                            </template>
                        </td>
                        <td colspan="1" >
                             <div class="slds-text-align_right">
                            <template lwc:if={isEditMode}>
                                <lightning-icon icon-name="action:delete" data-index={index}
                                    alternative-text="Delete this row" size="xx-small" title="Delete this row"
                                    onclick={removeClientPriorityRow}>
                                </lightning-icon>
                            </template>
                            <template lwc:else>
                                <lightning-icon icon-name="action:delete" alternative-text="Delete this row" size="xx-small"
                                    title="Delete this row" class="disabled-icon">
                                </lightning-icon>
                            </template>
                            </div>
                        </td>

                    </tr>
                </template>
            </tbody>
        </table>
    </div>
    <div>
    <div class="section-header">
        <div class="slds-p-top_xx-small slds-p-left_x-small slds-text-heading_small slds-p-bottom_medium">
            <span><b>UHG 3 Year Strategy (include 5%/10%/20% savings plan)</b></span>
        </div>
    </div>
    </div>
    <div class="slds-p-top_small  slds-text-align_right slds-text-heading_small">
        <template lwc:if={isEditMode}>

            <lightning-button label="Clear Data" class="clear-data-btn" variant="Neutral" alternative-text="Clear entire table" size="small"
                title="Clear entire table" onclick={deleteAllRows}>
            </lightning-button>
            <template if:true={showConfirmModalStrategy}>
                <section role="dialog" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <header class="slds-modal__header " style="background-color: #ba0517; color: white;">
                            <h2 class="slds-text-heading_medium">Confirmation</h2>
                        </header>
                        <div class="slds-modal__content slds-p-around_medium">
                                <p class="slds-text-heading_small slds-text-align_center slds-p-horizontal_large">
                                    This action will clear all data in the table. Are you sure you want to proceed?
                                </p>
                            <div style="text-align: center;" class="slds-p-top_large">
                            <lightning-button label="Continue" onclick={handleConfirmDeleteStrategy}>
                            </lightning-button>
                            <lightning-button label="Cancel" onclick={handleCancelDelete} class="slds-m-left_x-small">
                            </lightning-button>
                        </div>
                        </div>
                        
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </template>
        </template>
        <template lwc:else>
            <lightning-button label="Clear Data" class="clear-data-btn" variant="Neutral" disabled alternative-text="Clear entire table"
                size="xx-small" title="Clear entire table" onclick={deleteAllRows}>
            </lightning-button>
        </template>
    </div>
    <div class="slds-p-top_small slds-p-bottom_large">
        <table class="slds-text-body_small slds-table slds-border_left slds-border_right  slds-table--bordered slds-max-medium-table--stacked-horizontal slds-table--resizable-cols slds-table--fixed-layout">
            <tr>
                <td class="slds-border_right" colspan ="1">
                            <b>5% Savings Plan</b>
                </td>
                <td class="slds-border_right" colspan ="2">
                    <template if:true={isEditMode}>
                                <lightning-textarea type="text" name="X5_Savings_Plan__c" value={ebdListData.X5_Savings_Plan__c}
                                    onchange={handleInputChange} max-length="32768">
                                </lightning-textarea>
                            </template>
                            <template if:false={isEditMode}>
                                <template lwc:if={ebdListData.X5_Savings_Plan__c}>
                                    <!-- <span>{ebdListData.X5_Savings_Plan__c}</span> -->
                                     <lightning-formatted-text style="word-wrap: break-word; white-space: normal;"
                                    value={ebdListData.X5_Savings_Plan__c}></lightning-formatted-text>
                                </template>
                            </template>
                </td>
            </tr>
            <tr>
                <td class="slds-border_right" colspan ="1">
                            <b>10% Savings Plan</b>
                            </td>
                <td class="slds-border_right" colspan ="2">
                            <template if:true={isEditMode}>
                                <lightning-textarea type="text" name="X10_Savings_Plan__c" value={ebdListData.X10_Savings_Plan__c}
                                    onchange={handleInputChange} max-length="32768">
                                </lightning-textarea>
                            </template>
                            <template if:false={isEditMode}>
                                <template lwc:if={ebdListData.X10_Savings_Plan__c}>
                                    <!-- <span>{ebdListData.X10_Savings_Plan__c}</span> -->
                                    <lightning-formatted-text style="word-wrap: break-word; white-space: normal;"
                                    value={ebdListData.X10_Savings_Plan__c}></lightning-formatted-text>

                                </template>
                            </template>
                </td>
            </tr>
            <tr>
                <td class="slds-border_right" colspan ="1">
                            <b>20% Savings Plan</b>
                </td>
                <td class="slds-border_right" colspan ="2">
                            <template if:true={isEditMode}>
                                <lightning-textarea type="text" name="X20_Savings_Plan__c" value={ebdListData.X20_Savings_Plan__c}
                                    onchange={handleInputChange} max-length="32768">
                                </lightning-textarea>
                            </template>
                            <template if:false={isEditMode}>
                                <template lwc:if={ebdListData.X20_Savings_Plan__c}>
                                    <!-- <span>{ebdListData.X20_Savings_Plan__c}</span> -->
                                     <lightning-formatted-text style="word-wrap: break-word; white-space: normal;"
                                    value={ebdListData.X20_Savings_Plan__c}></lightning-formatted-text>
                                </template>
                            </template>
                </td>
            </tr>
        </table>
    </div>
</template>