<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction,lightning:actionOverride" access="global" Controller="Membership_QA_Controller">
    
    <aura:handler name="init" action="{!c.doInit}" value="{!this}" />
    <aura:registerEvent name="modalCmpCloseEvent" type="c:Model_Closing_Event"/>
    <aura:registerEvent name="AccountMA_QAEvent" type="c:AccountMA_QA_Event"/>
    <aura:handler name="QA_Event" action="{!c.getAccountData}" event="c:QA_Event" />
    
    <aura:attribute name="Child_Data" type="Object" />
    <aura:attribute name="AggregatorInvolvedInOppName" type="String" default="" />
    <aura:attribute name="isOpp" type="Boolean" default="false" />
    <aura:attribute name="OpportunityData" type="Opportunity" />
    <aura:attribute name="NavigationPages" type="Object" />
    <aura:attribute name="MandatoryFieldsMap" type="String" default="" />
    <aura:attribute name="MandatoryEmptyFieldsArray" type="Object[]" />
    <aura:attribute name="PicklistFieldsItags" type="List" />
    <aura:attribute name="ConditionallyMandatoryFieldsMap" type="String" default="" />
    <aura:attribute name="ValidateDateFieldsMap" type="String" default="" />
    <aura:attribute name="kanbanBranchingList" type="List" default="[{'label': 'Step 1', 'value': 'General Information'},
                                                                    {'label': 'Step 2', 'value': 'Team Information'},{'label': 'Step 3', 'value': 'Anticipated/Actual Close Date, Sales Stage'},{'label': 'Step 4', 'value': 'Products and Competitors'},{'label': 'Step 5', 'value': 'Consultants'},{'label': 'Step 6', 'value': 'Private Exchange Transactions'},{'label': 'Step 7', 'value': 'Private Exchange Detail'}]" />
    <aura:attribute name="progressionBarWidth" type="String" default="width: 0%" />    
    <aura:attribute name="errorMessage" type="String" default="Exception" />
    <aura:attribute name="errorPopUpLabel" type="String" default="" />
    <aura:attribute name="dynamicComponentsByAuraId" type="Object" />
    <aura:attribute name="dynamicComponentAuraId" type="String"/>
    <aura:attribute name="AccountData" type="Account" />
    <aura:attribute name="isRequiredFields" type="Object" />
    <aura:attribute name="maType" type="String" />
    <aura:attribute name="isProductsAndCompetitorsScreen" type="Boolean" default="false" />
    <aura:attribute name="ProductNavigationPages" type="Object" />
    <aura:attribute name="isMedicalOtherTab" type="Boolean" default="false"/>
    <aura:attribute name="dualListBoxOptions" type="List" default="[]" />
    <aura:attribute name="TotalPdtsRecordsList" type="OpportunityLineItem[]" />
    <!--Added By Chandrika - 3873 -->
    <aura:attribute name="showLeadSourceField" type="Boolean" default="true"/>
    <aura:attribute name="DirectMarketing" type="Boolean" default="false"/>
    
    <!--Ended - 3873-->
    
    
    <aura:handler name="modalCmpCloseEvent" event="c:Model_Closing_Event" action="{!c.modelCloseComponentEvent}"/>
    {!v.body}
    
    <div class="modal-body modal-ch-body scrollable slds-modal__content">  
        
        <div class="slds-spinner_container slds-hide" aura:id="userLoadingspinner">
            <div class="slds-spinner--brand  slds-spinner slds-spinner--medium slds-is-relative loading-Position" role="status">
                <span class="slds-assistive-text">{!$Label.c.Loading}</span>
                <div class="slds-spinner__dot-a"></div>
                <div class="slds-spinner__dot-b"></div>
            </div>
        </div>
        
        <div class="slds-size_12-of-12 slds-m-bottom_medium slds-m-top_large slds-p-horizontal_medium kanban-branch">
            <div class="slds-progress ">
                <ol class="slds-progress__list">
                    <aura:iteration items="{!v.kanbanBranchingList}" var="stepValue">
                        <li aura:id="kanbanSteps" class="slds-progress__item slds-is-relative" title="{!stepValue.value}">
                            <button class="slds-button slds-progress__marker">
                                <span class="slds-assistive-text">{!stepValue.label}</span>
                            </button>
                            <label class="progression-label">{!stepValue.label}</label>
                        </li>
                    </aura:iteration>
                </ol>
                <div class="slds-progress-bar slds-progress-bar_x-small" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" role="progressbar">
                    <span class="slds-progress-bar__value" style="{!v.progressionBarWidth}">
                        <span class="slds-assistive-text">Progress: 0%</span>
                    </span>
                </div>
            </div>
        </div>
        
        <div aura:id="errorToastMessage" class="slds-hide slds-size_12-of-12 slds-m-bottom_medium">
            <div class="general-notification">
                <span>Review the errors on this page.</span>
            </div>
            <div class="error-list slds-p-horizontal_medium slds-has-error">
                <span class="slds-form-element__help">These required fields must be completed:
                    <aura:iteration items="{!v.MandatoryEmptyFieldsArray}" var="mandatoryEmptyField">
                        <span><a href="" class="error-link" data-record="{!mandatoryEmptyField.Itag}" onclick="{!c.focusMandatoryFields}">{!mandatoryEmptyField.Name}</a>, </span>
                    </aura:iteration></span>
            </div>
        </div>
        
        <div role="alertdialog" tabindex="-1" aura:id="reminderPopUp" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" class="slds-modal slds-fade-in-open slds-modal--prompt slds-hide">
            <div class="slds-modal__container">
                <div class="slds-modal__header slds-theme--error slds-theme--alert-texture">
                    <button class="slds-button slds-modal__close slds-button--icon-inverse" onclick="{!c.confirmCancelForPrompt}" title="Close">
                        <lightning:icon class="slds-button__icon slds-button__icon--large"  iconName="utility:close" size="x-small"/>
                        <span class="slds-assistive-text">{!$Label.c.Close}</span>
                    </button>
                    <h2 id="header43" class="slds-text-heading--medium">{!v.errorPopUpLabel}</h2>
                </div>
                <div class="slds-modal__content slds-p-around--medium">
                    <p class="slds-text-align--center">{!v.errorMessage}</p>
                </div>
                <div class="slds-modal__footer slds-theme--default">
                    <button class="slds-button slds-button--neutral" onclick="{!c.confirmCancelForPrompt}">{!$Label.c.OK}</button>
                </div>
            </div>
        </div>
        <div class="slds-backdrop slds-backdrop--open slds-hide" aura:id="reminderPopUp"></div>
        
        <div aura:id="QAPage1" class="slds-grid slds-wrap modal-content">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.GeneralInformation}</h4>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="AccountNameDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.CompanyName}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control slds-is-relative">
                        <ui:inputText class="slds-input search-input" aura:id="AccountName" value="{!v.OpportunityData.AccountName}" required="true" disabled="true" />
                    </div>
                    <div aura:id="AccountNameDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Product_Type_Involved_in_Opp__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.ProductsInvolvedInTheOpportunityOrRisk}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control checkbox-group">
                        <lightning:checkboxGroup aura:id="Product_Type_Involved_in_Opp__c" name="checkboxGroup" options="" value="" onchange="{!c.handleChange}" />
                    </div>
                    <div aura:id="Product_Type_Involved_in_Opp__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="EffectiveDate__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.EffectiveDate}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="EffectiveDate__c" value="{!v.OpportunityData.EffectiveDate__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" required="true"/>
                    </div>
                    <div aura:id="EffectiveDate__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}- {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                    <div aura:id="EffectiveDate__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="NameDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.MemberShipActivityName}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <ui:inputText aura:id="Name" class="slds-input" required="true" value="{!v.OpportunityData.Name}"/>
                    </div>
                    <div aura:id="NameDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Reason_for_the_Opportunity_Risk__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.ReasonForTheOpportunityOrRisk}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Reason_for_the_Opportunity_Risk__c" multiple="false" value="{!v.OpportunityData.Reason_for_the_Opportunity_Risk__c}" />                      
                    </div>
                    <div aura:id="Reason_for_the_Opportunity_Risk__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <!--<div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.IsThisAUMROpportunityOrRisk}</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Is_this_a_UMR_Opportunity_Risk__c" multiple="false" value="{!v.OpportunityData.Is_this_a_UMR_Opportunity_Risk__c}" />
                        //<lightning:radioGroup aura:id="Is_this_a_UMR_Opportunity_Risk__c" name="umrOpp" options="" value="" onchange="{!c.handleChangeForRadioButtonGroup}" />
                    </div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">Platforms Quoted</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Platforms_Quoted__c" multiple="true" value="{!v.OpportunityData.Platforms_Quoted__c}" />
                    </div>
                </div>
            </div>
             <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Product_Type_Involved_in_Opp__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">Platforms Quoted</label>
                    <div class="slds-form-element__control checkbox-group">
                        <lightning:checkboxGroup aura:id="Platforms_Quoted__c" name="checkboxGroup" options="" value="" onchange="{!c.handleChange}" />
                    </div>
                </div>
            </div>-->
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Product_Type_Involved_in_Opp__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">Platforms Quoted</label>
                    <div class="slds-form-element__control checkbox-group">
                        <lightning:dualListbox name="languages" aura:id="Platforms_Quoted__c"
                                               options="" value=""
                                               onchange="{! c.handleChange }"/>
                    </div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Expected_Date_of_RFP__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.WillThereBeAnRFP}</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="WillThrBeaRFP__c" multiple="false" value="{!v.OpportunityData.WillThrBeaRFP__c}" />
                    </div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.AggregatorInvolvedInTheOpptyOrRisk}</label>
                    <div class="slds-form-element__control slds-is-relative accName--ronly">
                        <ui:inputText class="slds-input search-input" aura:id="Aggregator_Involved_in_the_Oppty_Risk__c" value="{!v.AggregatorInvolvedInOppName}" disabled="true" />
                        <ui:button aura:id="" class="slds-button slds-button-default search-btn"  press="{!c.selectAccount}">   
                            <span class="search-icon"></span>
                        </ui:button>
                    </div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Expected_Date_of_RFP__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.ExpectedDateOfRFP}<aura:if isTrue="{!v.isRequiredFields.ExpectedDateOfRFP}"><span class="slds-required">*</span></aura:if></label>
                    <div class="slds-form-element__control">
                        <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="Expected_Date_of_RFP__c" value="{!v.OpportunityData.Expected_Date_of_RFP__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" required="true"/>
                    </div>
                    <div aura:id="Expected_Date_of_RFP__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}- {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                    <div aura:id="Expected_Date_of_RFP__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                </div>
            </div>
        </div>
        <div aura:id="QAPage2" class="slds-grid slds-wrap slds-hide modal-content">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.TeamOrCollaborativeInformation}</h4>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.Owner}</label>
                    <div class="slds-form-element__control slds-is-relative">
                        <ui:inputText class="slds-input search-input" aura:id="OwnerName" value="{!v.Child_Data.ownerName}" disabled="true" />
                    </div>
                </div>
            </div>            
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.SpecialtyBenefitsSVP}</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Specialty_Benefits_SVP__c" multiple="false" value="{!v.OpportunityData.Specialty_Benefits_SVP__c}" />                      
                    </div>
                </div>
            </div> 
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">Surest SVP</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Surest_SVP_Involved__c" multiple="false" value="{!v.OpportunityData.Surest_SVP_Involved__c}" />                      
                    </div>
                </div>
            </div> 
        </div>   
        <div aura:id="QAPage3" class="slds-grid slds-wrap slds-hide modal-content">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.AnticipatedOrActualCloseDate}</h4>
            </div>
            <div class="slds-size_1-of-1 slds-grid slds-wrap">
                <div aura:id="Medical" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Anticipated_Actual_Close_Date_Medical__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label">{!$Label.c.AnticipatedOrActualCloseDate_Medical}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="Anticipated_Actual_Close_Date_Medical__c" value="{!v.OpportunityData.Anticipated_Actual_Close_Date_Medical__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" />
                        </div>
                        <div aura:id="Anticipated_Actual_Close_Date_Medical__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField} - {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                        <div aura:id="Anticipated_Actual_Close_Date_Medical__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                    </div>
                </div>
                <div aura:id="Pharmacy" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Anticipated_Actual_Close_Date_Pharmacy__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label" for="input-id-2">{!$Label.c.AnticipatedOrActualCloseDate_Pharmacy}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="Anticipated_Actual_Close_Date_Pharmacy__c" value="{!v.OpportunityData.Anticipated_Actual_Close_Date_Pharmacy__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" />
                        </div>
                        <div aura:id="Anticipated_Actual_Close_Date_Pharmacy__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField} - {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                        <div aura:id="Anticipated_Actual_Close_Date_Pharmacy__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                        
                    </div>
                </div>
                <div aura:id="Dental" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Anticipated_Actual_Close_Date_Dental__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label" for="input-id-2">{!$Label.c.AnticipatedOrActualCloseDate_Dental}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="Anticipated_Actual_Close_Date_Dental__c" value="{!v.OpportunityData.Anticipated_Actual_Close_Date_Dental__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" />
                        </div>
                        <div aura:id="Anticipated_Actual_Close_Date_Dental__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField} - {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                        <div aura:id="Anticipated_Actual_Close_Date_Dental__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                    </div>
                </div>
                <div aura:id="Vision" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Anticipated_Actual_Close_Date_Vision__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label" for="input-id-2">{!$Label.c.AnticipatedOrActualCloseDate_Vision}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="Anticipated_Actual_Close_Date_Vision__c" value="{!v.OpportunityData.Anticipated_Actual_Close_Date_Vision__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" />
                        </div>
                        <div aura:id="Anticipated_Actual_Close_Date_Vision__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField} - {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                        <div aura:id="Anticipated_Actual_Close_Date_Vision__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                    </div>
                </div>
                <div aura:id="Other Buy Up Programs" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Anticipated_Actual_Close_Date_Other__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label" for="input-id-2">{!$Label.c.AnticipatedOrActualCloseDate_Other}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputDate class="slds-input" format="M/d/yyyy" aura:id="Anticipated_Actual_Close_Date_Other__c" value="{!v.OpportunityData.Anticipated_Actual_Close_Date_Other__c}" displayDatePicker="true" change="{!c.onChangeOfDate}" />
                        </div>
                        <div aura:id="Anticipated_Actual_Close_Date_Other__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField} - {!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                        <div aura:id="Anticipated_Actual_Close_Date_Other__cDiv2" class="slds-hide slds-form-element__help">{!$Label.c.MandatoryErrorMsg_Date_Field}</div>
                    </div>
                </div>
            </div>
            
            <div class="slds-size_1-of-1 slds-grid slds-wrap">
                <div aura:id="Medical" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Sales_Stage_Medical__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label">{!$Label.c.SalesStage_Medical}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputSelect class="slds-form-control slds-select" aura:id="Sales_Stage_Medical__c" multiple="false" value="{!v.OpportunityData.Sales_Stage_Medical__c}" />                      
                        </div>
                        <div aura:id="Sales_Stage_Medical__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                    </div>
                </div> 
                <div aura:id="Pharmacy" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Sales_Stage_Pharmacy__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label">{!$Label.c.SalesStage_Pharmacy}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputSelect class="slds-form-control slds-select" aura:id="Sales_Stage_Pharmacy__c" multiple="false" value="{!v.OpportunityData.Sales_Stage_Pharmacy__c}" />                      
                        </div>
                        <div aura:id="Sales_Stage_Pharmacy__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                    </div>
                </div>
                <div aura:id="Dental" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Sales_Stage_Dental__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label">{!$Label.c.SalesStage_Dental}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputSelect class="slds-form-control slds-select" aura:id="Sales_Stage_Dental__c" multiple="false" value="{!v.OpportunityData.Sales_Stage_Dental__c}" />                      
                        </div>
                        <div aura:id="Sales_Stage_Dental__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                    </div>
                </div>
                <div aura:id="Vision" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Sales_Stage_Vision__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label">{!$Label.c.SalesStage_Vision}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputSelect class="slds-form-control slds-select" aura:id="Sales_Stage_Vision__c" multiple="false" value="{!v.OpportunityData.Sales_Stage_Vision__c}" />                      
                        </div>
                        <div aura:id="Sales_Stage_Vision__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                    </div>
                </div>
                <div aura:id="Other Buy Up Programs" class="slds-hide slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                    <div aura:id="Sales_Stage_Other__cDiv" class="slds-form-element slds-m-bottom_medium">
                        <label class="slds-form-element__label">{!$Label.c.SalesStage_OtherBuyUp}<span class="slds-required">*</span></label>
                        <div class="slds-form-element__control">
                            <ui:inputSelect class="slds-form-control slds-select" aura:id="Sales_Stage_Other__c" multiple="false" value="{!v.OpportunityData.Sales_Stage_Other__c}" />                      
                        </div>
                        <div aura:id="Sales_Stage_Other__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                    </div>
                </div>
                
            </div>  
            <!-- Added by Chandrika - #3873-->
                <aura:renderIf isTrue="{!v.showLeadSourceField}">
                    <div class="slds-size_1-of-1 slds-grid slds-gutters slds-wrap ">
                    <div class="slds-size_1-of-2"></div> <!-- Empty left -->
                        <div class="slds-size_1-of-2 slds-p-left_large">
                            <div aura:id="Lead_Source__cDiv" class="slds-form-element slds-m-bottom_medium">
                                
                                <label class="slds-form-element__label">{!$Label.c.LeadSource}</label>
                                <div class="slds-form-element__control">
                                    <ui:inputSelect class="slds-form-control slds-select" aura:id="Lead_Source__c" multiple="false" value="{!v.OpportunityData.Lead_Source__c}" change="{!c.handleLeadSourceChange}" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slds-size_1-of-1 slds-grid slds-gutters slds-wrap"> 
                        <div class=" slds-size_1-of-2 "></div>
                        <div class="slds-size_1-of-2 slds-p-left_large">
                        <div aura:id="Direct_Marketing_Initiator__cDiv" class="slds-form-element slds-m-bottom_medium">
                            <label class="slds-form-element__label">
                                {!$Label.c.DirectMarketingInitiator}
                                <aura:if isTrue="{!v.DirectMarketing}">
                                    <span class="slds-required">*</span>
                                </aura:if>
                            </label>
                            <div class="slds-form-element__control">
                                <ui:inputSelect class="slds-form-control slds-select" aura:id="Direct_Marketing_Initiator__c" multiple="false" value="{!v.OpportunityData.Direct_Marketing_Initiator__c}" />
                            </div>
                            <div aura:id="Direct_Marketing_Initiator__cDiv1" class="slds-form-element__help slds-hide">{!$Label.c.CompleteThisField}</div>
                        </div>
                    </div>
                    </div>
                
                </aura:renderIf>
                <!-- Ended- #3873--> 
        </div>
        <div aura:id="QAPage4" class="slds-grid slds-wrap slds-hide modal-content slds-p-horizontal_medium">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.ProductsAndCompetitors}</h4>
            </div>
            <div class="slds-size_1-of-1 slds-p-bottom_medium slds-p-horizontal_medium">
                <nav role="navigation" aria-label="Breadcrumbs" class="breadcrumb">
                    <ol class="slds-breadcrumb slds-list_horizontal slds-wrap">
                        <aura:if isTrue="{!v.isMedicalOtherTab}">
                            <li aura:id="MedicalOtherBreadCrumb" class="slds-breadcrumb__item slds-hide"><a href="javascript:void(0);">Medical and Other Buy Up Programs</a></li>
                            <aura:set attribute="else">
                                <li aura:id="MedicalBreadCrumb" class="slds-breadcrumb__item slds-hide"><a href="javascript:void(0);">Medical</a></li>
                            </aura:set>
                        </aura:if>
                        <li aura:id="PharmacyBreadCrumb" class="slds-breadcrumb__item slds-hide"><a href="javascript:void(0);">Pharmacy</a></li>
                        <li aura:id="DentalBreadCrumb" class="slds-breadcrumb__item slds-hide"><a href="javascript:void(0);">Dental</a></li>
                        <li aura:id="VisionBreadCrumb" class="slds-breadcrumb__item slds-hide"><a href="javascript:void(0);">Vision</a></li>
                        <aura:if isTrue="{!v.isMedicalOtherTab == false}">
                            <li aura:id="OtherBreadCrumb" class="slds-breadcrumb__item slds-hide"><a href="javascript:void(0);">Other Buy Up Programs</a></li>
                        </aura:if>                      
                    </ol>
                </nav>
            </div>
            <div class="slds-size_1-of-1">
                <aura:if isTrue="{!v.isProductsAndCompetitorsScreen}">
                    <aura:if isTrue="{!v.isMedicalOtherTab}">
                        <div aura:id="MedicalOtherProducts" class="slds-hide slds-m-bottom_medium pdt-compt">
                            <c:ProductsAndCompetitors aura:id="productsAndCompetitorsAuraId" 
                                                      productTypesValues="Medical_And_Other_Buy_Up"  
                                                      isEditRecord="true"
                                                      accountId="{!v.Child_Data.accountId}"
                                                      maType="{!v.maType}" 
                                                      SalesStageOther="{!v.OpportunityData.Sales_Stage_Other__c}"
                                                      SalesStage="{!v.OpportunityData.Sales_Stage_Medical__c}"
                                                      isMedicalAndOthersTab="true"
                                                      opportunityRecord="{!v.OpportunityData}"
                                                      RiskProbability="{!v.OpportunityData.Risk_Probability_Medical__c}"
                                                      RiskProbabilityOther="{!v.OpportunityData.Risk_Probability_Other__c}"   
                                                      isReadOnly="false" 
                                                      isQA="true" />
                        </div>
                        <aura:set attribute="else">
                            <div aura:id="MedicalProducts" class="slds-hide slds-m-bottom_medium pdt-compt">
                                <c:ProductsAndCompetitors aura:id="productsAndCompetitorsAuraId" 
                                                          productTypesValues="Medical"  
                                                          isEditRecord="true"
                                                          accountId="{!v.Child_Data.accountId}"
                                                          maType="{!v.maType}"
                                                          SalesStage="{!v.OpportunityData.Sales_Stage_Medical__c}" 
                                                          opportunityRecord="{!v.OpportunityData}"
                                                          RiskProbability="{!v.OpportunityData.Risk_Probability_Medical__c}" 
                                                          isReadOnly="false" 
                                                          isQA="true" />
                            </div>
                        </aura:set>
                    </aura:if>
                    <div aura:id="PharmacyProducts" class="slds-hide slds-m-bottom_medium pdt-compt">
                        <c:ProductsAndCompetitors aura:id="productsAndCompetitorsAuraId" 
                                                  productTypesValues="Pharmacy"  
                                                  isEditRecord="true"
                                                  accountId="{!v.Child_Data.accountId}"
                                                  maType="{!v.maType}"
                                                  SalesStage="{!v.OpportunityData.Sales_Stage_Pharmacy__c}"
                                                  opportunityRecord="{!v.OpportunityData}"
                                                  RiskProbability="{!v.OpportunityData.Risk_Probability_Pharmacy__c}" 
                                                  isReadOnly="false" 
                                                  isQA="true" />
                    </div>
                    <div aura:id="DentalProducts" class="slds-hide slds-m-bottom_medium pdt-compt">
                        <c:ProductsAndCompetitors aura:id="productsAndCompetitorsAuraId" 
                                                  productTypesValues="Dental"  
                                                  isEditRecord="true"
                                                  accountId="{!v.Child_Data.accountId}"
                                                  maType="{!v.maType}"
                                                  SalesStage="{!v.OpportunityData.Sales_Stage_Dental__c}"
                                                  opportunityRecord="{!v.OpportunityData}"
                                                  RiskProbability="{!v.OpportunityData.Risk_Probability_Dental__c}"  
                                                  isReadOnly="false" 
                                                  isQA="true" />
                    </div>
                    <div aura:id="VisionProducts" class="slds-hide slds-m-bottom_medium pdt-compt">
                        <c:ProductsAndCompetitors aura:id="productsAndCompetitorsAuraId" 
                                                  productTypesValues="Vision"  
                                                  isEditRecord="true"
                                                  accountId="{!v.Child_Data.accountId}"
                                                  maType="{!v.maType}"
                                                  SalesStage="{!v.OpportunityData.Sales_Stage_Vision__c}"
                                                  opportunityRecord="{!v.OpportunityData}"
                                                  RiskProbability="{!v.OpportunityData.Risk_Probability_Vision__c}"
                                                  isReadOnly="false" 
                                                  isQA="true" />
                    </div>
                    <aura:if isTrue="{!v.isMedicalOtherTab == false}">
                        <div aura:id="OtherProducts" class="slds-hide slds-m-bottom_medium pdt-compt">
                            <c:ProductsAndCompetitors aura:id="productsAndCompetitorsAuraId" 
                                                      productTypesValues="Other_Buy_Up_Programs"  
                                                      isEditRecord="true"
                                                      accountId="{!v.Child_Data.accountId}"
                                                      maType="{!v.maType}"
                                                      SalesStage="{!v.OpportunityData.Sales_Stage_Other__c}"
                                                      opportunityRecord="{!v.OpportunityData}"
                                                      RiskProbability="{!v.OpportunityData.Risk_Probability_Other__c}" 
                                                      isReadOnly="false" 
                                                      isQA="true" />
                        </div>
                    </aura:if>
                </aura:if>
            </div>
        </div>
        <div aura:id="QAPage5" class="slds-grid slds-wrap slds-hide modal-content">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.ConsultantDetail}</h4>
            </div>
            <div class="slds-m-bottom_medium slds-p-horizontal_medium">
                <c:MA_Consultants aura:id="maConsultantsAuraId" isMAConsultantListEmpty="true" isFromQA="true" accountId="{!v.Child_Data.accountId}" OpportunityDataChildComp="{!v.OpportunityData}" />
            </div>
        </div>
        <div aura:id="QAPage6" class="slds-grid slds-wrap slds-hide modal-content">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.ExchangeInformation}</h4>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Does_this_Oppty_Risk_Involve_Exchanges__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.Does_this_Oppty_Risk_Involve_Exchanges}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <lightning:radioGroup aura:id="Does_this_Oppty_Risk_Involve_Exchanges__c" name="companyExchanges" options="" value="" onchange="{!c.handleChangeForRadioButtonGroup}" />
                    </div>
                    <div class="slds-form-element__help slds-m-top_xx-small"><em>{!$Label.c.Step5_CD_InstructionText}</em></div>
                    <div aura:id="Does_this_Oppty_Risk_Involve_Exchanges__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
        </div>
        <div aura:id="QAPage7" class="slds-grid slds-wrap slds-hide modal-content">
            <div class="slds-size_12-of-12 slds-p-horizontal_medium">
                <h4 class="modal-title">{!$Label.c.ExchangeDetail}</h4>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Exchanges_the_Company_is_Looking_At__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.ExchangesTheCompanyIsLookingAt}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <!--<ui:inputSelect class="slds-form-control slds-select multiSelectScrollHeight" aura:id="Exchanges_the_Company_is_Looking_At__c" multiple="true" value="{!v.OpportunityData.Exchanges_the_Company_is_Looking_At__c}" /> -->
                        <lightning:dualListbox name="dualListBox" sourceLabel="Available" selectedLabel="Selected" options="{!v.dualListBoxOptions}" aura:id="Exchanges_the_Company_is_Looking_At__c" value="{!v.OpportunityData.Exchanges_the_Company_is_Looking_At__c}" />
                    </div>
                    <!--<div class="slds-form-element__help slds-m-top_xx-small"><em>{!$Label.c.Step8_InstructionText}</em></div>-->
                    <div aura:id="Exchanges_the_Company_is_Looking_At__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Is_the_PEX_Team_Creating_this_Oppty_Risk__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.IsThePEXTeamManagingThisOpptyOrRisk}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <lightning:radioGroup aura:id="Is_the_PEX_Team_Creating_this_Oppty_Risk__c" name="pexteam" options="" value="" onchange="{!c.handleChangeForRadioButtonGroup}" />
                    </div>
                    <div aura:id="Is_the_PEX_Team_Creating_this_Oppty_Risk__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <!--<div class="slds-size_12-of-12 slds-p-horizontal_medium slds-m-bottom_small">
                <p class="slds-form-element__help slds-m-top_none instruction-text"><b>Note :</b> The Instructional Text to be provided later.</p>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div aura:id="Membership_Activity_Type__cDiv" class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.MembershipActivityType}<span class="slds-required">*</span></label>
                    <div class="slds-form-element__control">
                        <lightning:radioGroup aura:id="Membership_Activity_Type__c" name="maActivityType" options="" value="" onchange="{!c.handleChangeForRadioButtonGroup}" />
                    </div>
                    <div aura:id="Membership_Activity_Type__cDiv1" class="slds-hide slds-form-element__help">{!$Label.c.CompleteThisField}</div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.CompanysProgressWithTheExchange}</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Company_s_Progress_with_the_Health_Care__c" multiple="false" value="{!v.OpportunityData.Company_s_Progress_with_the_Health_Care__c}"/>                      
                    </div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.Wave}</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Wave__c" multiple="false" value="{!v.OpportunityData.Wave__c}" />                      
                    </div>
                </div>
            </div>
            <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-grid slds-large-size_6-of-12 slds-p-horizontal_medium">
                <div class="slds-form-element slds-m-bottom_medium">
                    <label class="slds-form-element__label">{!$Label.c.PrimarySitusState}</label>
                    <div class="slds-form-element__control">
                        <ui:inputSelect class="slds-form-control slds-select" aura:id="Primary_Situs_State__c" multiple="false" value="{!v.OpportunityData.Primary_Situs_State__c}" />                      
                    </div>
                </div>
            </div>-->
        </div>        
    </div>
    
    <div class="modal-footer modal-ch-footer slds-modal__footer footer-body">                
        <aura:if isTrue="{!v.NavigationPages.Page > 1}">
            <ui:button aura:id="prevBtn" class="slds-button slds-button--brand"  press="{!c.previousPage}">Previous</ui:button>
        </aura:if>
        <aura:if isTrue="{!v.NavigationPages.LastPage > v.NavigationPages.Page}">
            <ui:button aura:id="nextBtn" class="slds-button slds-button--brand"  press="{!c.nextPage}">Next</ui:button>
        </aura:if>
        <aura:if isTrue="{!v.NavigationPages.Page == v.NavigationPages.LastPage}">
            <div class="save-btn">
                <ui:button aura:id="prevBtn" class="slds-button slds-button_success" press="{!c.saveRecord}">Save</ui:button>
            </div>
        </aura:if>
    </div>
    
</aura:component>