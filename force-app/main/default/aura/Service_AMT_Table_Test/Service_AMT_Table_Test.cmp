<aura:component implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction" access="global" >
    
    <aura:registerEvent name="service_amt_Popup_table_event" type="c:Service_AMT_Search_Popup_Table_Event"/>
    <aura:attribute name="Service_AMT_Table" type="boolean"/>
    <aura:attribute name="serviceAMTObj" type="Service_AMT__c" />
    <aura:attribute name="serviceAMTObjId" type="String" />
    <aura:attribute name="isEditable" type="boolean" default="false" />
    <aura:attribute name="userRolePLValues" type="String[]"/>
    <aura:attribute name="contactRolePLValues" type="String[]"/>
    <aura:attribute name="RolePicklist" type="String[]"/>
    <aura:attribute name="PolicyPicklist" type="String[]" />
    <aura:attribute name="sobjectusedAccount" type="boolean"/>
    <aura:attribute name="policyName" type="String"/>
    <aura:attribute name="PoliciesList" type="Policy_Information__c[]"/>
    <aura:attribute name="PoliciesListNames" type="Policy_Information__c[]"/>
    <aura:attribute name="isCheckBoxChecked" type="Boolean" />
    <aura:attribute name="selectedvalues" type="String" default="null"/>
    
   <!-- <ltng:require styles="{!$Resource.SLDS + '/assets/styles/salesforce-lightning-design-system.min.css'}"/>-->
    
    <aura:handler name="init" action="{!c.doInit}" value="{!this}"/>
    
    <aura:method name="cancelFields" action="{!c.cancelRecords}" access="PUBLIC">
        <aura:attribute name="cancelEdit" type="Boolean" default="false" />
    </aura:method>
    <aura:method name="editFields" action="{!c.editRecords}" access="PUBLIC">       
    </aura:method>
    
    <div role="alertdialog" tabindex="-1" aura:id="confirmDeleteRecord" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" class="slds-modal slds-fade-in-open slds-modal--prompt slds-hide">
        <div class="slds-modal__container">
            <div class="slds-modal__header slds-theme--error slds-theme--alert-texture">
                <button class="slds-button slds-modal__close slds-button--icon-inverse" onclick="{!c.confirmCancel}" title="Close">
                    <lightning:icon class="slds-button__icon slds-button__icon--large"  iconName="utility:close" size="x-small" alternativeText="Product" />
                    <span class="slds-assistive-text">{!$Label.c.Close}</span>
                </button>
                <h2 id="header43" class="slds-text-heading--medium">{!$Label.c.Confirmation}</h2>
            </div>
            <div class="slds-modal__content slds-p-around--medium">
                <p class="slds-text-align--center">You are not allowed to edit this. Please Select through Date picker</p>
            </div>
            <div class="slds-modal__footer slds-theme--default">
                <button class="slds-button slds-button--neutral" onclick="{!c.confirmDelete}">{!$Label.c.Delete}</button>
                <button class="slds-button slds-button--neutral" onclick="{!c.confirmCancel}">{!$Label.c.Cancel}</button>
            </div>
        </div>
    </div>
    
    <aura:method name="removeProcessingIcon" action="{!c.removeProcessingOnCancel}" access="PUBLIC"></aura:method>
    
    <tr class="slds-hint-parent">
        <th scope="row" data-label="Last Name">
            <div class="slds-cell-wrap" title="Last Name">{!v.serviceAMTObj.Last_Name__c}</div>
        </th>
        <th scope="row" data-label="First Name">
            <div class="slds-cell-wrap" title="First Name">{!v.serviceAMTObj.First_Name__c}</div>
        </th>
        <aura:if isTrue="{!v.isEditable}">
        	<th scope="row" data-label="AMT Start Date">
                <ui:inputDate class="alignDateField" aura:id="editableField" displayDatePicker="true" format="M/d/yyyy" value="{!v.serviceAMTObj.Case_Management_Start_Date__c}" />
            </th>
            <th scope="row" data-label="AMT End Date">
                <ui:inputDate class="alignDateField" aura:id="editableField" displayDatePicker="true"  format="M/d/yyyy"  value="{!v.serviceAMTObj.Case_Management_End_Date__c}"/>
            </th>
            <th scope="row" data-label="AMT Role">                                                
                <ui:inputSelect class="slds-form-control" aura:id="Role" multiple="false" change="{!c.onSelectRoleChangeFunction}" required="true">
                    <aura:iteration items="{!v.contactRolePLValues}" var="RolePicklistVar">                                    
                        <aura:if isTrue="{!RolePicklistVar == v.serviceAMTObj.Contact_Role__c}">
                            <ui:inputSelectOption class="slds-cell-wrap" text="{!RolePicklistVar}" value="true"/> 
                            <aura:set attribute="else">
                                <ui:inputSelectOption text="{!RolePicklistVar}" /> 
                            </aura:set>
                        </aura:if>
                    </aura:iteration>
                </ui:inputSelect>                                                                                                    
            </th>
            <th scope="row" data-label="Phone">
                <ui:inputPhone  class="slds-cell-wrap" value="{!v.serviceAMTObj.Phone__c}"/>
            </th>
            <th scope="row" data-label="E-mail">
            	<div class="slds-cell-wrap" title="E-mail">{!v.serviceAMTObj.Email__c}</div>
        	</th>
            <th scope="row" data-label="UserHierarchy">
                <ui:inputNumber value="{!v.serviceAMTObj.UserHierarchy__c}"/>
            </th>
            <aura:set attribute="else">
                <th scope="row" data-label="AMT Start Date">
                	<ui:outputDate aura:id="outputfield1" format="M/d/yyyy" value="{!v.serviceAMTObj.Case_Management_Start_Date__c}"/>
            	</th>
                <th scope="row" data-label="AMT End Date">
                    <ui:outputDate aura:id="outputfield2"  format="M/d/yyyy"  value="{!v.serviceAMTObj.Case_Management_End_Date__c}"/>
                </th>
                <th scope="row" data-label="Role"  class="slds-cell-wrap">
                    <span>{!v.serviceAMTObj.Contact_Role__c}</span>
                </th>
                <th scope="row" data-label="Phone">
                    <ui:outputPhone  class="slds-cell-wrap" value="{!v.serviceAMTObj.Phone__c}" />
            	</th>
                 <th scope="row" data-label="E-mail">
                    <div class="slds-cell-wrap" title="E-mail">{!v.serviceAMTObj.Email__c}</div>
                </th>
                <th scope="row" data-label="UserHierarchy">
                    <ui:outputNumber  class="slds-cell-wrap" value="{!v.serviceAMTObj.UserHierarchy__c}" format=""/>
                </th>
            </aura:set>
        </aura:if>                                            
                      
      
        <aura:if isTrue="{!v.sobjectusedAccount}">
            <aura:if isTrue="{!v.isEditable}">
                <th scope="row" data-label="Order">
                	<ui:inputNumber value="{!v.serviceAMTObj.Order__c}"/>
                </th>
                <th scope="row" data-label="PolicyId"> 
                    <ui:inputSelect class="slds-form-control slds-hide" aura:id="multipleSelect" multiple="true" change="{!c.onSelectPolicyInformation}" />
                </th>
                <th scope="row" data-label="External" width="90" class="slds-text-align_center">
                    <ui:inputCheckbox class="slds-text-align_center marginExternal" aura:id="checkBox" value="{!v.serviceAMTObj.External__c }"/>
                </th>
            </aura:if>
            <aura:set attribute="else">
                <th scope="row" data-label="Order">
                	<ui:outputNumber  class="slds-cell-wrap" value="{!v.serviceAMTObj.Order__c}" format=""/>
                </th>
                <th scope="row" data-label="PolicyId">
                    <ui:outputText aura:id="outputText" value="{!v.serviceAMTObj.Policy_Information_MultiChecKlist__c}" class="slds-cell-wrap "/> 
                </th>
                <th scope="row" data-label="External" width="90" class="slds-text-align_center">
                    <ui:outputCheckbox class="slds-text-align_center marginExternal" value="{!v.serviceAMTObj.External__c}"/>
                </th>
            </aura:set>                                                     
            
            <th scope="row" data-label="">            
                <div class="" aura:id="deleteIcon" title="Remove">
                    <button class="slds-button slds-button_icon delete-btn" onclick="{!c.confirmDelete}" title="Delete">
                        <lightning:icon iconName="utility:delete" size="xx-small"></lightning:icon>
                        <span class="slds-assistive-text">Delete</span>
                    </button>
                </div>
                <div aura:id="spinner" class="slds-hide dotsSpinnerContainer">
                    <div class="dotsSpinnerContent slds-is-relative slds-p-around_medium">
                        <span class="slds-assistive-text">Loading</span>
                        <div role="status" class="slds-spinner slds-spinner_brand slds-spinner_x-small">                                
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                </div>
            </th>
        </aura:if>
    </tr>
    
</aura:component>